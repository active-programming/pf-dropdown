!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){n(1),t.exports=n(3)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),l=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.containerTmpl='<div class="pf-input-frame">\n            <ul class="pf-decorated" style="display:none"><li></li></ul>\n            <input type="text" class="pf-input" value="" style="background-color: transparent"/>\n            <a href="#" class="pf-arrow"><i></i></a>\n        </div>\n        <div class="pf-dropdown-frame" style="display:none">\n            <ul class="pf-dropdown-list"></ul>\n        </div>',this.groupTmpl='<li class="pf-dropdown-group" data-group_id="">\n                <span class="pf-group-item"></span>\n            <ul class="pf-dropdown-group-items"></ul>\n        </li>',this.itemTmpl='<li class="pf-dropdown-item" data-item_value=""></li>',this.$original=$([]),this.$container=$([]),this.$input=$([]),this.$ajax=null,this.groups=[],this.items=[],this.settings={containerClass:"pf-dropdown",implementOriginalStyles:!0,displaySelectionAs:"text",autocomplete:!1,minLength:2,ajax:{loadOnInit:!1,url:"",type:"get",dataType:"json",valueKey:"value",titleKey:"title",dataKey:"dataset"},plugins:[],callbacks:{onRendered:null,onClose:null,onOpen:null,onOverItem:null,onLeaveItem:null,onSelectItem:null,onInputKeyEvent:null,renderItem:null,renderGroup:null,ajaxDataBuilder:null,ajaxResponseFilter:null}},this.$original=$(e);var r=$.extend({},this.settings,n);r.ajax=$.extend({},this.settings.ajax,n.ajax),r.callbacks=$.extend({},this.settings.callbacks,n.callbacks),this.settings=r,this._loadOriginalOptions(),this._renderWidget(this.items,this.groups),this._executeCallback("onRendered",this.$original,this.$container),""!==$.trim(this.settings.ajax.url)&&!0===this.settings.ajax.loadOnInit&&this._loadRemoteItems()}return a(t,[{key:"_loadOriginalOptions",value:function(){var t=this,e=this.$original.find("optgroup"),n=function(e,n){e.each(function(e,i){var r=$(i),a={},o=r.data("set"),l=r.attr("value")?r.attr("value"):"";try{a="string"==typeof o?$.parseJSON(o):o}catch(t){console.warn("data-set contains wrong value:",o)}t.items.push({group:n,value:l,title:r.text()?r.text():"",data:a||{}})})};e.length>0?e.each(function(e,i){var r=t.groups.length+1;t.groups.push({id:r,label:$(i).attr("label")}),n($(i).find("option"),r)}):n(this.$original.find("option"),"")}},{key:"_loadRemoteItems",value:function(){var t=this,e=this.settings.ajax,n={};!0===this.settings.autocomplete&&(n.term=this.$input.val()),null!==this.$ajax&&4!==this.$ajax.readyState&&this.$ajax.abort(),n=this._executeCallback("ajaxDataBuilder",n,this.$original,this.$container,this.settings),this.$ajax=$.ajax({url:e.url,type:e.type,dataType:"json",data:n}).done(function(e){var n=t._executeCallback("ajaxResponseFilter",e,t.settings);Array.isArray(n)||$.isPlainObject(n)||(n=e),t._loadItemsFromResponse(n)})}},{key:"_loadItemsFromResponse",value:function(t){var e=this;this.items=[],this.groups=[];var n=this.settings.ajax,i=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";$.isPlainObject(t)?t[n.dataKey]&&t[n.valueKey]&&t[n.titleKey]?e.items.push({group:i,value:t[n.valueKey],title:t[n.titleKey],data:t[n.dataKey]}):console.warn("Item doesn't contain needed keys: "+n.titleKey+", "+n.valueKey+", "+n.dataKey,t):console.warn("Wrong item type",t)};if(Array.isArray(t)){var r=!0,a=!1,o=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;i(u)}}catch(t){a=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}}else $.isPlainObject(t)&&$.each(t,function(t,n){if(Array.isArray(n)){var r=e.groups.length+1;e.groups.push({id:r,label:t});var a=!0,o=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;i(c,r)}}catch(t){o=!0,l=t}finally{try{!a&&u.return&&u.return()}finally{if(o)throw l}}}});return this._replaceOriginalOptions(this.$original,this.items,this.groups),this._renderList(this.$container,this.items,this.groups),!0===this.settings.autocomplete&&this.$container.find(".pf-dropdown-item").length>0&&(this.$container.find(".pf-dropdown-frame").css("display",""),this._executeCallback("onOpen",this.$original,this.$container)),[this.items,this.groups]}},{key:"_deleteAllItems",value:function(){this.items=[],this.groups=[],this.$original.html(""),this.$container.find(".pf-dropdown-list").html(""),this.$container.find(".pf-dropdown-frame").css("display","none")}},{key:"_getSelectedItem",value:function(){var t=this.$original.find("option:selected").attr("value");return t=t||"",this._getItemByValue(t)}},{key:"_getItemByValue",value:function(t){if(this.items.length>0){var e=!0,n=!1,i=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;if(o.value==t)return o}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}}return null}},{key:"_implementOriginalStyles",value:function(t,e){var n=["background","backgroundColor","border","position","top","left","right","bottom","color","cursor","font","height","lineHeight","margin","maxHeight","maxWidth","outline","width","wordSpacing","wordWrap","zoom"],i=void 0!==document.defaultView?document.defaultView.getComputedStyle(t[0],null):{};for(var r in i)if(n.includes(r)){var a=i[r];["height","width"].includes(r)&&"auto"===a&&(a=t.css(r)),"position"===r&&"static"===a&&(a="relative"),"border"===r?"none"!==a&&(e.find(".pf-input-frame").css(r,a).css("box-sizing","border-box"),e.find(".pf-dropdown-frame").css(r,a).css("border-top","none").css("box-sizing","border-box")):(e.css(r,a),["width","height"].includes(r)&&e.find(".pf-input-frame").css(r,a),"color"===r&&e.find(".pf-input").css(r,a))}return e}},{key:"_replaceOriginalOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t.html(""),e.length>0)if(!0===this.settings.autocomplete&&t.append($(n.length>0?'<optgroup label="---"><option value="">---</option></optgroup>':'<option value="">---</option>')),n.length>0){var i=!0,r=!1,a=void 0;try{for(var o,l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var s=o.value,u=$("<optgroup></optgroup>").attr("label",s.label),c=!0,d=!1,p=void 0;try{for(var f,h=e[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var g=f.value;u.append($("<option></option>").attr("value",g.value).html(g.title))}}catch(t){d=!0,p=t}finally{try{!c&&h.return&&h.return()}finally{if(d)throw p}}t.append(u)}}catch(t){r=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw a}}}else{var v=!0,y=!1,m=void 0;try{for(var b,_=e[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var x=b.value;t.append($("<option></option>").attr("value",x.value).html(x.title))}}catch(t){y=!0,m=t}finally{try{!v&&_.return&&_.return()}finally{if(y)throw m}}}}},{key:"_renderWidget",value:function(t,e){var n=this;return this.$container=this._renderContainer(this.$original,this.settings),this.$input=this.$container.find(".pf-input"),this._renderList(this.$container,t,e),this.$container.find(".pf-input-frame, .pf-input, .pf-arrow").on("click",function(t){if(t.preventDefault(),t.stopPropagation(),!0===n.settings.autocomplete){var e=n.$input.val();n._deleteAllItems(),e.length>=n.settings.minLength&&n._loadRemoteItems()}return n._toggleDropdown(),!1}),this.$original.on("change",function(t,e){if("by-widget-changed"===(e=e||""))return!1;n.setValue($(t.currentTarget).val())}),this.settings.autocomplete&&this.$input.on("keypress keyup keydown",function(t){var e=$(t.currentTarget).val();n.$original.trigger(t),n._executeCallback("onInputKeyEvent",t,$(t.currentTarget)),"keyup"===t.type&&(n._deleteAllItems(),e.length>=n.settings.minLength&&n._loadRemoteItems())}),$("body").on("click pf-dropdown-click",function(t){"none"!==n.$container.find(".pf-dropdown-frame").css("display")&&(n.$container.find(".pf-dropdown-frame").css("display","none"),n._executeCallback("onClose",n.$original,n.$container))}),this.$container}},{key:"_renderList",value:function(t,e,n){var i=void 0;if(n.length>0){i=$([]);var r=!0,a=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value,c=this._renderItems(e,u.id),d=this._renderGroup(u,c);d instanceof $&&(i=i.add(d))}}catch(t){a=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}}else i=this._renderItems(e);if(t.find(".pf-dropdown-list").html(i),!0!==this.settings.autocomplete){var p=this._getSelectedItem();if(null!==p){var f=this._renderItem(p);!1!==f&&this._selectItem(f,p,!1)}}}},{key:"_renderContainer",value:function(t,e){t.css("display","none");var n=$("<div>").addClass(e.containerClass).append($(this.containerTmpl));return!0===e.useOriginalStyles&&(n=this._implementOriginalStyles(t,n)),!0==!e.autocomplete&&n.find(".pf-input").prop("readonly",!0),"html"===e.displaySelectionAs&&n.find(".pf-decorated").css("display",""),n.insertBefore(this.$original),n.append(this.$original),n}},{key:"_renderItems",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(t.length>0){var n=$([]),i=!0,r=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var s=o.value;if(e<0||e>=0&&s.group==e){var u=this._renderItem(s);u instanceof $&&(n=n.add(u))}}}catch(t){r=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw a}}return n}return null}},{key:"_renderItem",value:function(t){var e=this;if(t=t||!1,!$.isPlainObject(t))return!1;if([r(t.id),r(t.value),r(t.title)].includes("undfined"))return!1;var n=$(this.itemTmpl).attr("data-item_value",t.value).html(t.title),i=this._executeCallback("renderItem",n.clone(),t,this.$original,this.$container,this.settings);return i instanceof $&&i.hasClass("pf-dropdown-item")&&i.data("item_value")||(i=n),i.hover(function(t){var n=$(t.currentTarget),i=e._getItemByValue(n.data("item_value"));e._executeCallback("onOverItem",n,i)},function(t){var n=$(t.currentTarget),i=e._getItemByValue(n.data("item_value"));e._executeCallback("onLeaveItem",n,i)}),i.on("click",function(t){var n=e._getItemByValue($(t.currentTarget).data("item_value"));e._selectItem($(t.currentTarget),n),e._toggleDropdown()}),i}},{key:"_renderGroup",value:function(t,e){var n=$(this.groupTmpl).attr("data-group_id",t.id);n.find(".pf-group-item").html(t.label),e instanceof $&&n.find(".pf-dropdown-group-items").html(e);var i=this._executeCallback("renderGroup",n.clone(!0),t,e,this.$original,this.$container,this.settings);return i instanceof $||(i=n),i}},{key:"_toggleDropdown",value:function(){var t=this.$container.find(".pf-dropdown-frame");"none"!==t.css("display")?(t.css("display","none"),this._executeCallback("onClose",this.$original,this.$container)):($("body").trigger("pf-dropdown-click"),this.$container.find(".pf-dropdown-item").length>0&&(t.css("display",""),this._executeCallback("onOpen",this.$original,this.$container)))}},{key:"_selectItem",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.$container.find(".pf-input"),r=this.$container.find(".pf-decorated li"),a=!$.isPlainObject(e);e=a?{title:"",value:"",group:"",data:{}}:e,"html"===this.settings.displaySelectionAs?(i.val(""),r.html(a?"":t.clone())):(i.val(e.title),r.html("")),this.$original.val(e.value),n&&(this._executeCallback("onSelectItem",e),this.$original.trigger("change"))}},{key:"_executeCallback",value:function(t){for(var e="on"===t.substring(0,2),n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if($.isFunction(this.settings.callbacks[t])&&(e?this.settings.callbacks[t].apply(this,i):i[0]=this.settings.callbacks[t].apply(this,i)),this.settings.plugins.length>0){var o=!0,l=!1,s=void 0;try{for(var u,c=this.settings.plugins[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;"object"===(void 0===d?"undefined":r(d))&&$.isFunction(d[t])&&(e?d[t].apply(d,i):i[0]=d[t].apply(d,i))}}catch(t){l=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(l)throw s}}}return i[0]}},{key:"getValue",value:function(){return this._getSelectedItem()}},{key:"setValue",value:function(t){var e=null,n=this._getItemByValue(t);null!==n&&(e=this._renderItem(n)),this._selectItem(e,n,!1)}}]),t}();(0,l.default)("pfDropdown",s)},function(t,e,n){"use strict";function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="__"+t,a=$.fn[t];$.fn[t]=function(n,a){a=void 0===a?null:a;var o=null,l=!1;return this.each(function(){var s=$(this),u=s.data(i),c=$.extend({},e.DEFAULTS,s.data(),"object"===(void 0===n?"undefined":r(n))&&n);u||s.data(i,u=new e(this,c)),"string"==typeof n&&($.isFunction(u[n])?(o=u[n](a),l=!0):console.log(t+" has no method or option like '"+n+"'"))}),l?o:this},n&&($[t]=function(e){return $({})[t](e)}),$.fn[t].noConflict=function(){return $.fn[t]=a}}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=i},function(t,e){}]);